<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>ä»é›¶å¼€å§‹é…ç½®VPS | Tmpfile&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ç¯å¢ƒ Ubuntu 16.04 x64  sshæ— å¯†ç™»å½•åˆ›å»º ssh å…¬ç§é’¥ 123ssh-keygen -t rsacd ~/.ssh/cat id_rsa.pub  å°†å…¬é’¥ id_rsa.pub çš„å†…å®¹ copyï¼Œé“¾æ¥ä¸ŠæœåŠ¡å™¨ 1ssh root@[domain] -p [port]">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»é›¶å¼€å§‹é…ç½®VPS">
<meta property="og:url" content="https://blog.flyriven.com/2019/08/23/how-to-use-vps/index.html">
<meta property="og:site_name" content="Tmpfile&#39;s Blog">
<meta property="og:description" content="ç¯å¢ƒ Ubuntu 16.04 x64  sshæ— å¯†ç™»å½•åˆ›å»º ssh å…¬ç§é’¥ 123ssh-keygen -t rsacd ~/.ssh/cat id_rsa.pub  å°†å…¬é’¥ id_rsa.pub çš„å†…å®¹ copyï¼Œé“¾æ¥ä¸ŠæœåŠ¡å™¨ 1ssh root@[domain] -p [port]">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://blog.flyriven.com/images/image-20190821141127861.png">
<meta property="og:image" content="https://blog.flyriven.com/images/image-20190821141326574.png">
<meta property="og:updated_time" content="2019-08-23T09:31:09.398Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä»é›¶å¼€å§‹é…ç½®VPS">
<meta name="twitter:description" content="ç¯å¢ƒ Ubuntu 16.04 x64  sshæ— å¯†ç™»å½•åˆ›å»º ssh å…¬ç§é’¥ 123ssh-keygen -t rsacd ~/.ssh/cat id_rsa.pub  å°†å…¬é’¥ id_rsa.pub çš„å†…å®¹ copyï¼Œé“¾æ¥ä¸ŠæœåŠ¡å™¨ 1ssh root@[domain] -p [port]">
<meta name="twitter:image" content="https://blog.flyriven.com/images/image-20190821141127861.png">
  
    <link rel="alternate" href="/atom.xml" title="Tmpfile&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tmpfile&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.flyriven.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-how-to-use-vps" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/23/how-to-use-vps/" class="article-date">
  <time datetime="2019-08-23T08:50:17.000Z" itemprop="datePublished">2019-08-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ä»é›¶å¼€å§‹é…ç½®VPS
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul>
<li>Ubuntu 16.04 x64</li>
</ul>
<h2 id="sshæ— å¯†ç™»å½•"><a href="#sshæ— å¯†ç™»å½•" class="headerlink" title="sshæ— å¯†ç™»å½•"></a>sshæ— å¯†ç™»å½•</h2><p>åˆ›å»º ssh å…¬ç§é’¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">cd ~/.ssh/</span><br><span class="line">cat id_rsa.pub</span><br></pre></td></tr></table></figure>

<p>å°†å…¬é’¥ <strong>id_rsa.pub</strong> çš„å†…å®¹ copyï¼Œé“¾æ¥ä¸ŠæœåŠ¡å™¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@[domain] -p [port]</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>é»˜è®¤ä¼šåœ¨ root ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å†æ¬¡ç”Ÿæˆä¸€å¯¹å…¬ç§é’¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:~# ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa):</span><br><span class="line">Created directory '/root/.ssh'.</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:JO3v66ip8fefzexPuZR2/7uoDXtfqy1DIzNMrRleJYc root@hot-cluster-1.localdomain</span><br><span class="line">The key's randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|              .  |</span><br><span class="line">|       .     E o |</span><br><span class="line">|      . o   . +  |</span><br><span class="line">|       +   o o   |</span><br><span class="line">|        S + =    |</span><br><span class="line">|         . O o  o|</span><br><span class="line">|    .     ..= .=+|</span><br><span class="line">|     o ..o  +O=.*|</span><br><span class="line">|    ..+o.o====XOB|</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line">root@hot-cluster:~# ls -la</span><br><span class="line">total 32</span><br><span class="line">drwx------  5 root root 4096 Aug 20 06:17 .</span><br><span class="line">drwxr-xr-x 23 root root 4096 Aug 20 05:26 ..</span><br><span class="line">-rw-r--r--  1 root root 3106 Oct 22  2015 .bashrc</span><br><span class="line">drwx------  2 root root 4096 Mar 14  2017 .cache</span><br><span class="line">drwxr-xr-x  2 root root 4096 Mar 14  2017 .nano</span><br><span class="line">-rw-r--r--  1 root root  148 Aug 17  2015 .profile</span><br><span class="line">drwx------  2 root root 4096 Aug 20 06:17 .ssh</span><br><span class="line">-rw-r--r--  1 root root  197 Aug 20 05:27 virt-sysprep-firstboot.log</span><br><span class="line">root@hot-cluster:~#</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥åˆ° <strong>.ssh</strong> ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª <strong>authorized_keys</strong> æ–‡ä»¶ï¼Œå¹¶ç»™ä¸€ä¸ª <strong>644</strong> çš„æƒé™ï¼Œå°†æˆ‘ä»¬æœ¬æœºçš„å…¬é’¥ï¼Œä¹Ÿå°±æ˜¯ <strong>id_rsa.pub</strong> çš„å†…å®¹ç²˜è´´è¿›å»ã€‚é€€å‡ºï¼Œé‡æ–°è¿æ¥è¯¥æœåŠ¡å™¨ï¼Œä½ ä¼šå‘ç°å·²ç»ä¸éœ€è¦ä½ å†è¾“å…¥å¯†ç äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:~<span class="comment"># cd .ssh/</span></span><br><span class="line">root@hot-cluster:~/.ssh<span class="comment"># ls</span></span><br><span class="line">id_rsa  id_rsa.pub</span><br><span class="line">root@hot-cluster:~/.ssh<span class="comment"># touch authorized_keys</span></span><br><span class="line">root@hot-cluster:~/.ssh<span class="comment"># ls</span></span><br><span class="line">authorized_keys  id_rsa  id_rsa.pub</span><br><span class="line">root@hot-cluster:~/.ssh<span class="comment"># chmod 644 authorized_keys</span></span><br><span class="line">root@hot-cluster:~/.ssh<span class="comment"># ll</span></span><br><span class="line">total 16</span><br><span class="line">drwx------ 2 root root 4096 Aug 20 06:22 ./</span><br><span class="line">drwx------ 5 root root 4096 Aug 20 06:17 ../</span><br><span class="line">-rw-r--r-- 1 root root    0 Aug 20 06:22 authorized_keys</span><br><span class="line">-rw------- 1 root root 1675 Aug 20 06:17 id_rsa</span><br><span class="line">-rw-r--r-- 1 root root  412 Aug 20 06:17 id_rsa.pub</span><br><span class="line">root@hot-cluster-1:~/.ssh<span class="comment"># vim authorized_keys</span></span><br><span class="line">root@hot-cluster-1:~/.ssh<span class="comment"># cat authorized_keys</span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQAxBAAABsdAQDA4JC3Ag2DZsH77YP6bIX0bC5BT+JADyVry7ktGYso2hbPyvgAZo2pnA+Q1WO2Tz3JxnJolDXhJIOm+mRrra1pufJX181LzEI4kBWxZmGHDsj6SoiHOwNgyXcTsS0ixctnL+DDLS8ncD5q40/iKgo7N9p9fE8aBLsd56WgfxU26WNDn3WzM3YNaTEmPnZ6+p6bwe5xnTR0S9sXyWIBfibAXnKzrccYQ9/CLAkL/hHVQzlUnii76gy0E/7Zg9FIta4X2a2tazBbB+ZchuJUEl/j6AfBKwetAIEPq5PEzWEj5oNZJXGFVOAw9TXqDXAbqqmSq/lqOrBD6lbNVXxs5REFPn3 xxx@xxxx-xxx.local</span><br><span class="line">root@hot-cluster-1:~/.ssh<span class="comment"># exit</span></span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®nginxäºŒçº§åŸŸååˆ†å‘"><a href="#é…ç½®nginxäºŒçº§åŸŸååˆ†å‘" class="headerlink" title="é…ç½®nginxäºŒçº§åŸŸååˆ†å‘"></a>é…ç½®nginxäºŒçº§åŸŸååˆ†å‘</h2><h3 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install nginx</span><br><span class="line">sudo ufw allow <span class="string">'Nginx HTTP'</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥ä¸‹ nginx çš„çŠ¶æ€</span></span><br><span class="line">sudo systemctl status nginx</span><br><span class="line"><span class="comment"># output </span></span><br><span class="line">â— nginx.service - A high performance web server and a reverse proxy server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Tue 2019-08-20 06:35:40 EDT; 15h ago</span><br><span class="line">  Process: 1983 ExecStop=/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /run/nginx.pid (code=exited, status=1/FAILURE)</span><br><span class="line">  Process: 1900 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 1996 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 1902 (nginx)</span><br><span class="line">    Tasks: 3</span><br><span class="line">   Memory: 2.2M</span><br><span class="line">      CPU: 4.669s</span><br><span class="line">   CGroup: /system.slice/nginx.service</span><br><span class="line">           â”œâ”€19902 nginx: master process /usr/sbin/nginx -g daemon on; master_process on</span><br><span class="line">           â”œâ”€19903 nginx: worker process</span><br><span class="line">           â””â”€19904 nginx: worker process</span><br><span class="line"></span><br><span class="line">Aug 20 06:35:40 hot-cluster.localdomain systemd[1]: Starting A high performance web server and a reverse proxy server...</span><br><span class="line">Aug 20 06:35:40 hot-cluster.localdomain systemd[1]: Started A high performance web server and a reverse proxy server.</span><br></pre></td></tr></table></figure>

<h3 id="nginx-çŠ¶æ€å˜æ›´"><a href="#nginx-çŠ¶æ€å˜æ›´" class="headerlink" title="nginx çŠ¶æ€å˜æ›´"></a>nginx çŠ¶æ€å˜æ›´</h3><ul>
<li><p>åœæ­¢ <strong>nginx</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡å¯ <strong>nginx</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯åŠ¨ <strong>nginx</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡æ–°åŠ è½½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl reload nginx</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="nginx-é…ç½®"><a href="#nginx-é…ç½®" class="headerlink" title="nginx é…ç½®"></a>nginx é…ç½®</h3><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦é…ç½®nginxï¼Œä½¿æˆ‘ä»¬åŸŸåèƒ½å¤Ÿåˆ†å‘åˆ°äºŒçº§åŸŸåå»ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æ‰¾åˆ°nginxçš„é…ç½®æ–‡ä»¶åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:/etc/nginx/conf.d<span class="comment"># nginx -t</span></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢è¿”å›çš„ç»“æœå¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶åœ¨ <strong>/etc/nginx</strong> ç›®å½•ä¸‹ï¼Œè¿›å…¥è¿™ä¸ªç›®å½•ï¼Œä½¿ç”¨ <strong>cat</strong> å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹ <strong>nginx.conf</strong> æ–‡ä»¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¸ä¼šç›´æ¥åœ¨ <strong>nginx.conf</strong> æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œè€Œæ˜¯åœ¨ <strong>nginx.conf</strong> ä¸­å¼•å…¥æ–‡ä»¶çš„ç›®å½•ä¸‹å»å¢åŠ ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line"></span><br><span class="line">	......</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Virtual Host Configs</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	include /etc/nginx/conf.d/*.conf;</span><br><span class="line">	include /etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <strong>http</strong> æ¨¡å—ä¸­æœ‰ä¸ª <strong>Virtual Host Configs</strong> å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶åŒ…å«äº† <strong>/etc/nginx/conf.d/</strong> ä¸‹æ‰€æœ‰çš„ <strong>.conf</strong> æ–‡ä»¶ã€‚æˆ‘ä»¬è¦ç»™äºŒçº§ç›®å½•å¢åŠ ä¸€ä¸ªserverï¼Œç”¨æ¥è§£æäºŒçº§åŸŸåï¼Œåœ¨ <strong>/etc/nginx/conf.d/</strong> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <strong>conf</strong> æ–‡ä»¶</p>
<p>åˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦å°†æœåŠ¡é…ç½®è¿›å»ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å…ˆå¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡ï¼Œè¿™é‡Œå¯åŠ¨ä¸€ä¸ªssmgrçš„æœåŠ¡ï¼Œè¦å…ˆå¤„ç†åé¢çš„å†…å®¹ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  x.xxxxxx.com;</span><br><span class="line">    rewrite ^(.*)$ https://$host$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 443;</span><br><span class="line">    server_name x.flyriven.com;</span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate  /root/Dropbox/x.xxxxxx.com/Nginx/1_x.xxxxxx.com_bundle.crt;</span><br><span class="line">    ssl_certificate_key /root/Dropbox/x.xxxxx.com/Nginx/2_x.xxxxxx.com.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">			proxy_set_header           Host $host:$server_port;</span><br><span class="line">			proxy_pass                http://127.0.0.1:9999;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç”¨äº†è…¾è®¯äº‘ç”³è¯·çš„è¯ä¹¦ï¼Œä¸€å®šè¦å»æä¸ªè¯ä¹¦ï¼Œä¸ç„¶çš„è¯ï¼Œè®¢é˜…åŠŸèƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h2 id="å®‰è£…Dropbox"><a href="#å®‰è£…Dropbox" class="headerlink" title="å®‰è£…Dropbox"></a>å®‰è£…Dropbox</h2><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦Dropboxå‘¢ï¼Œæœ‰äº†Dropboxï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç¼–è¾‘ä¸€äº›å†…å®¹ï¼ŒåŒæ­¥åˆ°æœåŠ¡å™¨ä¸Šï¼Œé¿å…äº†ä½ æ‰‹åŠ¨ç™»å½•æœåŠ¡å™¨ï¼Œå»åˆ›å»ºæ–‡ä»¶ï¼Œè®¾ç½®æƒé™ç­‰ç­‰ä¸€ç³»åˆ—å¤æ‚çš„æ“ä½œã€‚æ¯”å¦‚efbçš„é…ç½®æ–‡ä»¶å†…å®¹ã€‚</p>
<p><strong>Dropbox</strong> çš„å®‰è£…ç‰¹åˆ«ç®€å•ã€‚</p>
<ul>
<li>ä¸‹è½½ <strong>Dropbox</strong></li>
<li>è¿è¡Œ <strong>Dropbox</strong> å®ˆæŠ¤ç¨‹åº</li>
<li>é€šè¿‡ <strong>python</strong> è„šæœ¬å¯åŠ¨ <strong>Dropbox</strong></li>
</ul>
<h4 id="ä¸‹è½½-Dropbox"><a href="#ä¸‹è½½-Dropbox" class="headerlink" title="ä¸‹è½½ Dropbox"></a>ä¸‹è½½ Dropbox</h4><p>æˆ‘çš„<strong>VPS</strong>ç³»ç»Ÿæ˜¯ <strong>Ubuntu 16.04 x86_64</strong> çš„ï¼Œä¸€æ¡å‘½ä»¤æå®šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~ &amp;&amp; wget -O - <span class="string">"https://www.dropbox.com/download?plat=lnx.x86_64"</span> | tar xzf -</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯å…¶ä»– 32 ä½çš„ <strong>Linux å‘è¡Œç‰ˆæœ¬</strong> ä½¿ç”¨ä¸‹é¢è¿™æ¡, 64 ä½çš„ä½¿ç”¨ä¸Šé¢è¿™æ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~ &amp;&amp; wget -O - <span class="string">"https://www.dropbox.com/download?plat=lnx.x86"</span> | tar xzf -</span><br></pre></td></tr></table></figure>

<h4 id="è¿è¡Œ-Dropbox-å®ˆæŠ¤ç¨‹åº"><a href="#è¿è¡Œ-Dropbox-å®ˆæŠ¤ç¨‹åº" class="headerlink" title="è¿è¡Œ Dropbox å®ˆæŠ¤ç¨‹åº"></a>è¿è¡Œ Dropbox å®ˆæŠ¤ç¨‹åº</h4><p>ä¸‹è½½é€Ÿåº¦éå¸¸å¿«ï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢å³æ˜¯ä¸‹è½½å®Œæˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:~<span class="comment"># wget -O - "https://www.dropbox.com/download?plat=lnx.x86_64" | tar xzf -</span></span><br><span class="line">--2019-08-20 22:19:35--  https://www.dropbox.com/download?plat=lnx.x86_64</span><br><span class="line">Resolving www.dropbox.com (www.dropbox.com)... 162.125.2.1, 2620:100:6017:1::a27d:201</span><br><span class="line">Connecting to www.dropbox.com (www.dropbox.com)|162.125.2.1|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Found</span><br><span class="line">Location: https://clientupdates.dropboxstatic.com/dbx-releng/client/dropbox-lnx.x86_64-79.4.143.tar.gz [following]</span><br><span class="line">--2019-08-20 22:19:36--  https://clientupdates.dropboxstatic.com/dbx-releng/client/dropbox-lnx.x86_64-79.4.143.tar.gz</span><br><span class="line">Resolving clientupdates.dropboxstatic.com (clientupdates.dropboxstatic.com)... 13.225.144.57</span><br><span class="line">Connecting to clientupdates.dropboxstatic.com (clientupdates.dropboxstatic.com)|13.225.144.57|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 95990187 (92M) [binary/octet-stream]</span><br><span class="line">Saving to: <span class="string">'STDOUT'</span></span><br><span class="line"></span><br><span class="line">-                                     100%[========================================================================&gt;]  91.54M  30.1MB/s    <span class="keyword">in</span> 3.0s</span><br><span class="line"></span><br><span class="line">2019-08-20 22:19:39 (30.1 MB/s) - written to stdout [95990187/95990187]</span><br><span class="line"></span><br><span class="line">root@hot-cluster-1:~<span class="comment"># ll</span></span><br><span class="line">total 56</span><br><span class="line">drwx------  8 root root 4096 Aug 20 22:20 ./</span><br><span class="line">drwxr-xr-x 23 root root 4096 Aug 20 06:29 ../</span><br><span class="line">-rw-------  1 root root  506 Aug 20 06:36 .bash_history</span><br><span class="line">-rw-r--r--  1 root root 3106 Oct 22  2015 .bashrc</span><br><span class="line">drwx------  2 root root 4096 Mar 14  2017 .cache/</span><br><span class="line">drwxr-xr-x  7 root root 4096 Aug 20 22:20 .dropbox/</span><br><span class="line">drwxrwxr-x  3 1000 1000 4096 Aug 13 07:34 .dropbox-dist/</span><br><span class="line">drwxr-xr-x  2 root root 4096 Mar 14  2017 .nano/</span><br><span class="line">-rw-r--r--  1 root root  148 Aug 17  2015 .profile</span><br><span class="line">drwx------  2 root root 4096 Aug 20 06:22 .ssh/</span><br><span class="line">-rw-------  1 root root 1100 Aug 20 22:15 .viminfo</span><br><span class="line">-rw-r--r--  1 root root  172 Aug 20 22:19 .wget-hsts</span><br><span class="line">-rw-r--r--  1 root root  197 Aug 20 05:27 virt-sysprep-firstboot.log</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”¨æˆ·ç›®å½•ä¸‹å·²ç»æœ‰ä¸€ä¸ªéšè—çš„ç›®å½• <strong>.dropbox/</strong> æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ‰§è¡Œ <strong>Dropbox</strong> çš„å®ˆæŠ¤ç¨‹åº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:~<span class="comment"># ~/.dropbox-dist/dropboxd</span></span><br><span class="line">dropbox: locating interpreter</span><br><span class="line">dropbox: logging to /tmp/dropbox-antifreeze-lRsecj</span><br><span class="line">dropbox: initializing</span><br><span class="line">dropbox: initializing python 3.7.2</span><br><span class="line">dropbox: setting program path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/dropbox'</span></span><br><span class="line">dropbox: setting home path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143'</span></span><br><span class="line">dropbox: setting python path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143:/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/python-packages-37.zip'</span></span><br><span class="line">dropbox: python initialized</span><br><span class="line">dropbox: running dropbox</span><br><span class="line">dropbox: setting args</span><br><span class="line">dropbox: applying overrides</span><br><span class="line">dropbox: running main script</span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._constant_time.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._openssl.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._padding.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/psutil._psutil_linux.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/psutil._psutil_posix.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.pthread._linuxffi_pthread.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cpuid.compiled._cpuid.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/tornado.speedups.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/apex._apex.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.resolv.compiled._linuxffi_resolv.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/librsyncffi.compiled._librsyncffi.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.sys.compiled._linuxffi_sys.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/posixffi.libc._posixffi_libc.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.gnu.compiled._linuxffi_gnu.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br><span class="line"> Dropbox  xxxx xxxx</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå½“æˆ‘ä»¬çœ‹åˆ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dropbox ...</span><br><span class="line"> https://www.dropbox.com/cli_link_nonce?nonce=5f30616049d385497f188f52421b38a6</span><br></pre></td></tr></table></figure>

<p>å‡ºç°æ—¶ï¼Œéœ€è¦å°†è¿™ä¸ªç½‘å€å¤åˆ¶å‡ºæ¥ï¼Œç²˜è´´åˆ°æµè§ˆå™¨ä¸­è®¿é—®ï¼Œç»‘å®šè®¾å¤‡åˆ°Dropbox</p>
<p>ç„¶åå°±ä¼šçœ‹åˆ°æœ€åä¸€æ¡ <strong>Dropbox xxxx xxxx</strong> ï¼Œè¿™é‡Œçš„ <strong>xxxx xxxx</strong> æ˜¯ä½ çš„è´¦å·ä¿¡æ¯ã€‚</p>
<p>æœ€åä¸€æ­¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å®˜æ–¹æä¾›çš„<strong>python</strong>è„šæœ¬æ¥å¯åŠ¨<strong>Dropbox</strong></p>
<h4 id="å¯åŠ¨Dropbox"><a href="#å¯åŠ¨Dropbox" class="headerlink" title="å¯åŠ¨Dropbox"></a>å¯åŠ¨Dropbox</h4><p>æ‰“å¼€ç½‘å€ï¼š <a href="https://www.dropbox.com/install-linux" target="_blank" rel="noopener">https://www.dropbox.com/install-linux</a></p>
<p>åœ¨æœ€ä¸‹é¢æ‰¾åˆ° <strong>Python è„šæœ¬</strong> çš„è¶…é“¾æ¥ï¼Œç‚¹å‡»ä¸‹è½½ï¼Œæˆ–è€…ç›´æ¥è®¿é—®è¿™ä¸ªç½‘å€ï¼š</p>
<p><a href="https://www.dropbox.com/download?dl=packages/dropbox.py" target="_blank" rel="noopener">https://www.dropbox.com/download?dl=packages/dropbox.py</a></p>
<p>æˆ–è®¸ä½ è¿˜å¯ä»¥ä½¿ç”¨ <strong>wget</strong> ä¹‹ç±»çš„å‘½ä»¤è¡Œå·¥å…·ä¸‹è½½è¿™ä¸ªè„šæœ¬</p>
<p>ä¸‹ä¸€æ­¥æˆ‘ä»¬ä½¿ç”¨ <strong>python3</strong> æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬ç³»ç»Ÿæ˜¯<strong>Ubuntu 16.04</strong>ï¼Œå¹¸è¿çš„æ˜¯ç³»ç»Ÿè‡ªå¸¦ <strong>python3</strong> ç›´æ¥ä½¿ç”¨å°±è¡Œï¼Œå¦‚æœä½ çš„ç³»ç»Ÿä¸æ˜¯è‡ªå¸¦ <strong>python3</strong> çš„ï¼Œé‚£ä¹ˆå°†ä½ çš„ç³»ç»Ÿæ”¹ä¸º <strong>Ubuntu 16.04</strong>ï¼Œå› ä¸ºå…¶ä»–ç‰ˆæœ¬çš„<strong>Ubuntu</strong>å®‰è£…ä¸ä¸Š<strong>Dropbox</strong>ã€‚è¿™ä¸ªæ¯”è¾ƒé—æ†¾ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster:~<span class="comment"># python3 dropbox.py help</span></span><br><span class="line">Dropbox <span class="built_in">command</span>-line interface</span><br><span class="line"></span><br><span class="line">commands:</span><br><span class="line"></span><br><span class="line">Note: use dropbox <span class="built_in">help</span> &lt;<span class="built_in">command</span>&gt; to view usage <span class="keyword">for</span> a specific <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line"> autostart    automatically start Dropbox at login</span><br><span class="line"> exclude      ignores/excludes a directory from syncing</span><br><span class="line"> filestatus   get current sync status of one or more files</span><br><span class="line"> <span class="built_in">help</span>         provide <span class="built_in">help</span></span><br><span class="line"> lansync      enables or disables LAN sync</span><br><span class="line"> ls           list directory contents with current sync status</span><br><span class="line"> proxy        <span class="built_in">set</span> proxy settings <span class="keyword">for</span> Dropbox</span><br><span class="line"> puburl       get public url of a file <span class="keyword">in</span> your Dropbox<span class="string">'s public folder</span></span><br><span class="line"><span class="string"> running      return whether Dropbox is running</span></span><br><span class="line"><span class="string"> sharelink    get a shared link for a file in your Dropbox</span></span><br><span class="line"><span class="string"> start        start dropboxd</span></span><br><span class="line"><span class="string"> status       get current status of the dropboxd</span></span><br><span class="line"><span class="string"> stop         stop dropboxd</span></span><br><span class="line"><span class="string"> throttle     set bandwidth limits for Dropbox</span></span><br><span class="line"><span class="string"> update       download latest version of Dropbox</span></span><br><span class="line"><span class="string"> version      print version information for Dropbox</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># python3 dropbox.py start</span></span><br><span class="line">Starting Dropbox...dropbox: locating interpreter</span><br><span class="line">dropbox: logging to /tmp/dropbox-antifreeze-107MZM</span><br><span class="line">dropbox: initializing</span><br><span class="line">dropbox: initializing python 3.7.2</span><br><span class="line">dropbox: setting program path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/dropbox'</span></span><br><span class="line">dropbox: setting home path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143'</span></span><br><span class="line">dropbox: setting python path <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143:/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/python-packages-37.zip'</span></span><br><span class="line">dropbox: python initialized</span><br><span class="line">dropbox: running dropbox</span><br><span class="line">dropbox: setting args</span><br><span class="line">dropbox: applying overrides</span><br><span class="line">dropbox: running main script</span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._constant_time.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._openssl.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cryptography.hazmat.bindings._padding.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/psutil._psutil_linux.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/psutil._psutil_posix.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.pthread._linuxffi_pthread.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/cpuid.compiled._cpuid.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/tornado.speedups.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/apex._apex.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.resolv.compiled._linuxffi_resolv.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/librsyncffi.compiled._librsyncffi.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.sys.compiled._linuxffi_sys.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/posixffi.libc._posixffi_libc.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">dropbox: load fq extension <span class="string">'/root/.dropbox-dist/dropbox-lnx.x86_64-79.4.143/linuxffi.gnu.compiled._linuxffi_gnu.cpython-37m-x86_64-linux-gnu.so'</span></span><br><span class="line">Done!</span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ° <strong>Doneï¼</strong>å°±è¯´æ˜è¿è¡ŒæˆåŠŸäº†ï¼Œå¯ä»¥ç”¨ <strong>python3 dropbox.py status</strong> æ¥æŸ¥çœ‹çŠ¶æ€ã€‚</p>
<h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><p><strong>dropbox</strong> å®‰è£…å®Œäº†ï¼Œä¸ç”¨ç­‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å®‰è£…dockerï¼Œè¿™ä¸ªå¯çˆ±çš„å°é²¸é±¼ğŸ³ï¼Œæ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è·‘<strong>efb</strong>çš„é‡è¦å·¥å…·ã€‚å› ä¸º<strong>efb</strong>æ˜¯<strong>docker</strong>ç‰ˆçš„ã€‚</p>
<ul>
<li>è®¾ç½®æº</li>
<li>å®‰è£…<strong>docker</strong></li>
<li><strong>test docker</strong></li>
</ul>
<h4 id="è®¾ç½®æº"><a href="#è®¾ç½®æº" class="headerlink" title="è®¾ç½®æº"></a>è®¾ç½®æº</h4><ol>
<li><p>æ›´æ–°aptåŒ…ç´¢å¼•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>å®‰è£…åŒ…å…è®¸apté€šè¿‡httpsæ¥ä½¿ç”¨å­˜å‚¨åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥copyæ‰§è¡Œå°±è¡Œ</p>
</li>
<li><p>æ·»åŠ <strong>docker</strong>å®˜æ–¹çš„<strong>GPG</strong>å¯†é’¥</p>
<p>æ·»åŠ å¯†é’¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°å¦‚ä¸‹ç»“æœå°±æ˜¯æˆåŠŸçš„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pub   rsa4096 2017-02-22 [SCEA]</span><br><span class="line">      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88</span><br><span class="line">uid           [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;</span><br><span class="line">sub   rsa4096 2017-02-22 [S]</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="4">
<li><p>æ·»åŠ æº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br></pre></td></tr></table></figure>

<p>ç›´æ¥å¤åˆ¶åˆ°ç»ˆç«¯æ‰§è¡Œå°±è¡Œã€‚</p>
</li>
<li><p>æ›´æ–°åŒ…ç´¢å¼•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="6">
<li><p>å®‰è£…<strong>docker</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆä¹‹ååœ¨å®‰è£… <strong>docker-compose</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker-compose</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·dockerå°±å®‰è£…å®Œæˆäº†ã€‚</p>
</li>
</ol>
<h2 id="é…ç½®-EH-Forwarder-Bot"><a href="#é…ç½®-EH-Forwarder-Bot" class="headerlink" title="é…ç½® EH Forwarder Bot"></a>é…ç½® <strong>EH Forwarder Bot</strong></h2><p>æ¥ä¸‹æ¥é…ç½® <strong>EFB</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯<strong>2.0</strong>çš„ç‰ˆæœ¬ï¼Œ<strong>docker</strong>é•œåƒé€‰æ‹©çš„æ˜¯ <strong><a href="https://hub.docker.com/r/akyakya/efb-v2" target="_blank" rel="noopener">akayakya</a></strong> çš„ã€‚</p>
<ul>
<li>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ–‡ä»¶</li>
<li>åˆ›å»º<strong>telegram bot</strong></li>
<li><strong>yaml</strong> é…ç½®</li>
<li>å¯åŠ¨<strong>EFB</strong>æœåŠ¡</li>
<li>è¿æ¥<strong>å¾®ä¿¡</strong></li>
</ul>
<h4 id="åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ–‡ä»¶</h4><p>å…ˆæ¥çœ‹ä¸‹ç»“æ„æ ‘ğŸŒ²é•¿å•¥æ ·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~/Dropbox/docker_application<span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">`-- efb_v2</span><br><span class="line">    |-- blueset.telegram</span><br><span class="line">    |   |-- config.yaml</span><br><span class="line">    |   `-- tgdata.db</span><br><span class="line">    |-- blueset.wechat</span><br><span class="line">    |   |-- config.yaml</span><br><span class="line">    |   |-- wxpy.pkl</span><br><span class="line">    |   `-- wxpy_puid.pkl</span><br><span class="line">    |-- config.yaml</span><br><span class="line">    `-- docker-compose.yml</span><br><span class="line"></span><br><span class="line">3 directories, 7 files</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œ<strong>.pkl</strong> ç»“å°¾çš„æ–‡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚æˆ‘ä»¬ä»…ä»…éœ€è¦åˆ›å»º <strong>.yaml</strong> | <strong>.yml</strong> ä¸‰ç§æ–‡ä»¶æ ¼å¼çš„æ–‡ä»¶ã€‚</p>
<p>ä¸Šé¢æˆ‘ä»¬å®‰è£…äº†Dropboxï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œå°†ç›®å½•åˆ›å»ºåœ¨Dropbox çš„ç›®å½•ä¸‹ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># cd Dropbox/</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox<span class="comment"># mkdir -p docker_application^C</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox<span class="comment"># ls</span></span><br><span class="line">20181110-?????????????????????  20190225-????????????  docker_application  dropbox.py  workspace</span><br><span class="line">root@hot-cluster-1:~/Dropbox<span class="comment"># cd docker_application/</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><strong>Docker_application</strong> ç›®å½•å°±ä¸“é—¨ç”¨æ¥å­˜æ”¾ä¸€äº›<strong>docker</strong>é•œåƒçš„<strong>yml</strong>æ–‡ä»¶å§ã€‚</p>
<p>æ¥ç€ï¼Œå†åˆ›å»º<strong>efb_v2</strong>ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~/Dropbox/docker_application<span class="comment"># mkdir -p efb_2v</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application<span class="comment"># ls</span></span><br><span class="line">efb_v2</span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application<span class="comment"># cd efb_v2/</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»º<strong>blueset.telegram</strong> ç›®å½•å’Œ<strong>blueset.wechat</strong> ç›®å½•ï¼Œ<strong>docker-compose.yml</strong>ï¼Œ<strong>config.yaml</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># mkdir -p blueset.telegram</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># mkdir -p blueset.wechat</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># touch config.yaml docker-compose.yml blueset.telegram/config.yaml blueset.wechat/config.yaml</span></span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># ls</span></span><br><span class="line">blueset.telegram  blueset.wechat  config.yaml  docker-compose.yml</span><br><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ³¨æ„<strong>docker-compose</strong>å­—æ¯ä¸è¦æ‹¼å†™é”™è¯¯ã€‚åˆ†åˆ«ä¸º<strong>blueset.telegram</strong> å’Œ<strong>blueset.wechat</strong>ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚</p>
<h4 id="åˆ›å»ºTelegram-bot"><a href="#åˆ›å»ºTelegram-bot" class="headerlink" title="åˆ›å»ºTelegram bot"></a>åˆ›å»ºTelegram bot</h4><p>æ‰“å¼€Telegram, <strong>@BotFather</strong>ï¼Œè¾“å…¥ <strong>/newbot</strong> åˆ›å»ºä¸€ä¸ªbotï¼Œbotçš„åç§°éœ€è¦ä»¥ <strong>_bot</strong> ä½œä¸ºç»“å°¾ï¼Œè¿™é‡Œåšä¸ªå°å°çš„æ¼”ç¤ºã€‚</p>
<p><img src="/images/image-20190821141127861.png" alt="image-20190821141127861"></p>
<p>åˆ°è¿™æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªtokenäº†<strong>957778340:AAHXUvCWeqG-b6DXdkYOnukHWTvqhjYi9LE</strong></p>
<p>æ¥ä¸‹æ¥è®¾ç½®botçš„å‘½ä»¤ï¼šè¾“å…¥ <strong>/setcommands</strong> ï¼Œç„¶åé€‰æ‹©ä½ åˆšåˆ›å»ºçš„bot</p>
<p><img src="/images/image-20190821141326574.png" alt="image-20190821141326574"></p>
<p>è¾“å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">link - å°†ä¼šè¯ç»‘å®šåˆ° Telegram ç¾¤ç»„</span><br><span class="line">chat - ç”Ÿæˆä¼šè¯å¤´</span><br><span class="line">recog - å›å¤è¯­éŸ³æ¶ˆæ¯ä»¥è¿›è¡Œè¯†åˆ«</span><br><span class="line">extra - è·å–æ›´å¤šåŠŸèƒ½</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ° <strong>Success! Command list updated. /help</strong>ï¼Œè¯´æ˜è®¾ç½®æˆåŠŸã€‚</p>
<p>ç„¶åé…ç½®<strong>privacy</strong>ï¼Œ è¾“å…¥å‘½ä»¤ <strong>/setprivacy</strong>, é€‰æ‹©åˆšåˆ›å»ºçš„botï¼Œç„¶åé€‰æ‹©<strong>disable</strong></p>
<h4 id="yaml-é…ç½®"><a href="#yaml-é…ç½®" class="headerlink" title="yaml é…ç½®"></a>yaml é…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># config.yaml</span></span><br><span class="line"><span class="attr">master_channel:</span> <span class="string">blueset.telegram</span></span><br><span class="line"><span class="attr">slave_channels:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">blueset.wechat</span></span><br><span class="line"><span class="attr">middlewares:</span></span><br><span class="line"><span class="comment"># - catbaron.sticker2img</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.yml</span></span><br><span class="line"><span class="attr">efb_v2:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">akyakya/efb-v2:latest</span></span><br><span class="line"><span class="attr">  container_name:</span> <span class="string">efb_v2</span></span><br><span class="line"><span class="attr">  restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">  volumes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">.:/root/.ehforwarderbot/profiles/default/</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">/etc/localtime:/etc/localtime:ro</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">/etc/timezone:/etc/timezone:ro</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># blueset.telegram/config.yaml</span></span><br><span class="line"><span class="attr">token:</span> <span class="string">"xxxxxxxxx:xxxxxxxxxxxx"</span> <span class="comment">#æ¢æˆè‡ªå·±çš„bot token</span></span><br><span class="line"><span class="attr">admins:</span> </span><br><span class="line"><span class="bullet"> -</span> <span class="string">xxxxxxxx</span> <span class="comment">#æ¢æˆè‡ªå·±çš„telegram æ•°å­—id</span></span><br><span class="line"><span class="attr">flags:</span></span><br><span class="line"><span class="attr">    chats_per_page:</span> <span class="number">20</span> <span class="comment">#é€‰æ‹©/ chatå’Œ/ linkå‘½ä»¤æ—¶æ˜¾ç¤ºçš„èŠå¤©æ¬¡æ•°ã€‚è¿‡å¤§çš„å€¼å¯èƒ½å¯¼è‡´è¿™äº›å‘½ä»¤çš„æ•…éšœ</span></span><br><span class="line"><span class="attr">    network_error_prompt_interval:</span> <span class="number">100</span> <span class="comment">#æ¯æ”¶åˆ°nä¸ªé”™è¯¯åå†é€šçŸ¥ç”¨æˆ·æœ‰å…³ç½‘ç»œé”™è¯¯çš„ä¿¡æ¯ã€‚ è®¾ç½®ä¸º0å¯ç¦ç”¨å®ƒ</span></span><br><span class="line"><span class="attr">    multiple_slave_chats:</span> <span class="literal">true</span> <span class="comment">#é»˜è®¤true #å°†å¤šä¸ªè¿œç¨‹èŠå¤©é“¾æ¥åˆ°ä¸€ä¸ªTelegramç»„ã€‚ä½¿ç”¨æœªå…³è”çš„èŠå¤©åŠŸèƒ½å‘é€å’Œå›å¤ã€‚ç¦ç”¨ä»¥è¿œç¨‹èŠå¤©å’Œç”µæŠ¥ç»„ä¸€å¯¹ä¸€é“¾æ¥ã€‚</span></span><br><span class="line"><span class="attr">    prevent_message_removal:</span> <span class="literal">true</span>  <span class="comment">#å½“ä»é€šé“éœ€è¦åˆ é™¤æ¶ˆæ¯æ—¶ï¼Œå¦‚æœæ­¤å€¼ä¸ºtrueï¼ŒEFBå°†å¿½ç•¥è¯¥è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="attr">    auto_locale:</span> <span class="literal">true</span> <span class="comment">#è‡ªåŠ¨ä»ç®¡ç†å‘˜çš„æ¶ˆæ¯ä¸­æ£€æµ‹åŒºåŸŸè®¾ç½®ã€‚å¦åˆ™å°†ä½¿ç”¨åœ¨ç¯å¢ƒå˜é‡ä¸­å®šä¹‰çš„åŒºåŸŸè®¾ç½®ã€‚</span></span><br><span class="line"><span class="attr">    retry_on_error:</span> <span class="literal">false</span> <span class="comment">#åœ¨å‘Telegram Bot APIå‘é€è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯æ—¶æ— é™é‡è¯•ã€‚è¯·æ³¨æ„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é‡å¤çš„æ¶ˆæ¯ä¼ é€’ï¼Œå› ä¸ºTelegram Bot APIçš„å“åº”ä¸å¯é ï¼Œå¹¶ä¸”å¯èƒ½æ— æ³•åæ˜ å®é™…ç»“æœ</span></span><br><span class="line"><span class="attr">    message_muted_on_slave:</span> <span class="string">normal</span> <span class="comment">#normal:ä½œä¸ºæ™®é€šä¿¡æ¯å‘é€ç»™Telegram silent:å‘é€ç»™Telegramä½œä¸ºæ­£å¸¸æ¶ˆæ¯ï¼Œä½†æ²¡æœ‰é€šçŸ¥å£°éŸ³ mute:ä¸è¦å‘é€ç»™Telegram</span></span><br><span class="line"><span class="attr">    your_message_on_slave:</span> <span class="string">silent</span> <span class="comment">#åœ¨ä»å±é€šé“å¹³å°ä¸Šæ”¶åˆ°æ¶ˆæ¯æ—¶çš„è¡Œä¸ºã€‚è¿™å°†è¦†ç›–message_muted_on_slaveä¸­çš„è®¾ç½®ã€‚</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># blueset.wechat/config.yaml</span></span><br><span class="line"><span class="comment"># å®éªŒåŠŸèƒ½</span></span><br><span class="line"><span class="comment"># # ä½¿ç”¨æœ¬æ®µæ¥è°ƒæ•´å®éªŒåŠŸèƒ½çš„è®¾ç½®ã€‚è¯·æ³¨æ„å®éªŒåŠŸèƒ½éšæ—¶å¯èƒ½å˜æ›´æˆ–å¤±æ•ˆã€‚</span></span><br><span class="line"><span class="comment"># # è¯¦ç»†è¯´æ˜è§ä¸‹æ–‡ã€‚</span></span><br><span class="line"><span class="attr">flags:</span></span><br><span class="line"><span class="attr">    refresh_friends:</span> <span class="literal">false</span> <span class="comment">#æ¯å½“è¯·æ±‚ä¼šè¯åˆ—è¡¨æ—¶ï¼Œå¼ºåˆ¶åˆ·æ–°ä¼šè¯åˆ—è¡¨ã€‚[é»˜è®¤å€¼: false]</span></span><br><span class="line"><span class="attr">    first_link_only:</span> <span class="literal">false</span> <span class="comment">#åœ¨æ”¶åˆ°å¤šé“¾æ¥æ¶ˆæ¯æ—¶ï¼Œä»…å‘é€ç¬¬ä¸€æ¡é“¾æ¥ã€‚é»˜è®¤å¤šé“¾æ¥ä¼šå‘é€å¤šæ¡æ¶ˆæ¯ã€‚ [é»˜è®¤å€¼: false]</span></span><br><span class="line"><span class="attr">    max_quote_length:</span> <span class="bullet">-1</span> <span class="comment">#å¼•ç”¨æ¶ˆæ¯ä¸­å¼•æ–‡çš„é•¿åº¦é™åˆ¶ã€‚è®¾ç½®ä¸º 0 å…³é—­å¼•æ–‡åŠŸèƒ½ã€‚è®¾ç½®ä¸º -1 åˆ™å¯¹å¼•æ–‡é•¿åº¦ä¸åšé™åˆ¶ã€‚max_quote_length (int) [é»˜è®¤å€¼: -1]</span></span><br><span class="line"><span class="attr">    qr_reload:</span> <span class="string">"master_qr_code"</span> <span class="comment"># "console_qr_code": å°†äºŒç»´ç å’Œæç¤ºè¾“å‡ºåˆ°ç³»ç»Ÿæ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ã€‚"master_qr_code": å°†äºŒç»´ç å’Œæç¤ºå‘é€åˆ°ä¸»ç«¯ã€‚[é»˜è®¤å€¼: "master_qr_code"]</span></span><br><span class="line"><span class="attr">    on_log_out:</span> <span class="string">"command"</span> <span class="comment">#å¾®ä¿¡æœåŠ¡å™¨å°†ç”¨æˆ·ç™»å‡ºæ—¶çš„æ“ä½œã€‚ é€‰é¡¹:"idle": ä»…é€šçŸ¥ç”¨æˆ·ã€‚"reauth": é€šçŸ¥ç”¨æˆ·ï¼Œå¹¶ç«‹å³å¼€å§‹é‡æ–°ç™»å½•ã€‚"command": é€šçŸ¥ç”¨æˆ·ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·å¯åŠ¨é‡æ–°ç™»å½•è¿‡ç¨‹ã€‚[é»˜è®¤å€¼: "command"]</span></span><br><span class="line"><span class="attr">    imgcat_qr:</span> <span class="literal">false</span> <span class="comment">#ä½¿ç”¨ iTerm2 å›¾åƒåè®® æ˜¾ç¤ºäºŒç»´ç ã€‚æœ¬åŠŸèƒ½åªé€‚ç”¨äº iTerm2 ç”¨æˆ·ã€‚[é»˜è®¤å€¼: false]</span></span><br><span class="line"><span class="attr">    delete_on_edit:</span> <span class="literal">true</span> <span class="comment">#ä»¥æ’¤å›å¹¶é‡æ–°å‘é€çš„æ–¹å¼ä»£æ›¿ç¼–è¾‘æ¶ˆæ¯ã€‚é»˜è®¤ç¦æ­¢ç¼–è¾‘æ¶ˆæ¯ã€‚ [é»˜è®¤å€¼: false]</span></span><br><span class="line"><span class="attr">    app_shared_link_mode:</span> <span class="string">"ignore"</span> <span class="comment">#åœ¨æ”¶åˆ°ç¬¬ä¸‰æ–¹åˆä½œåº”ç”¨åˆ†äº«ç»™å¾®ä¿¡çš„é“¾æ¥æ—¶ï¼Œå…¶é™„å¸¦çš„é¢„è§ˆå›¾ä»¥ä½•ç§å½¢å¼å‘é€ã€‚"ignore"ï¼šå¿½ç•¥é™„å¸¦çš„ç¼©ç•¥å›¾"upload"ï¼šå°†ç¼©ç•¥å›¾ä¸Šä¼ åˆ°å…¬å¼€å›¾åºŠï¼ˆhttps://sm.msï¼‰ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­è¾“å‡ºå›¾ç‰‡çš„åˆ é™¤é“¾æ¥ã€‚"image"ï¼šå°†æ¶ˆæ¯ä»¥å›¾ç‰‡å½¢å¼å‘é€ï¼ˆä¸æ¨èï¼‰[é»˜è®¤å€¼ï¼š"ignore"]</span></span><br><span class="line"><span class="attr">    puid_logs:</span> <span class="literal">null</span> <span class="comment">#è¾“å‡º PUID ç›¸å…³æ—¥å¿—åˆ°æŒ‡å®šæ—¥å¿—è·¯å¾„ã€‚è¯·ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚PUID æ—¥å¿—å¯èƒ½ä¼šæ ¹æ®ä¼šè¯æ•°é‡å’Œæ¶ˆæ¯ååé‡ è€Œå ç”¨å¤§é‡å­˜å‚¨ç©ºé—´ã€‚</span></span><br><span class="line"><span class="attr">    send_stickers_and_gif_as_jpeg:</span> <span class="literal">false</span> <span class="comment">#ä»¥ JPEG å›¾ç‰‡æ–¹å¼å‘é€è‡ªå®šä¹‰è¡¨æƒ…å’Œ GIFï¼Œç”¨äºä¸´æ—¶ç»•è¿‡å¾®ä¿¡ç½‘é¡µç‰ˆçš„è‡ªå®šä¹‰è¡¨æƒ…é™åˆ¶ã€‚[é»˜è®¤å€¼: true]</span></span><br></pre></td></tr></table></figure>

<h4 id="å¯åŠ¨EFBæœåŠ¡"><a href="#å¯åŠ¨EFBæœåŠ¡" class="headerlink" title="å¯åŠ¨EFBæœåŠ¡"></a>å¯åŠ¨<strong>EFB</strong>æœåŠ¡</h4><p>é…ç½®æ–‡ä»¶å†™å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨è¿™ä¸ªæœåŠ¡ã€‚ç§»åŠ¨åˆ° <strong>docker-compose.yml</strong> çš„ç›®å½•ä¸‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¸‹è½½è¿è¡Œè¯¥é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># docker-compose up -d</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¯ä»¥äº†ï¼Œå¦‚æœä½ å¯¹dockeræ„Ÿå…´è¶£ï¼Œå¯ä»¥å»å®˜ç½‘çœ‹çœ‹å…¶ä»–çš„æ“ä½œã€‚ç„¶åæˆ‘ä»¬ä¸‹ä¸€æ­¥ï¼Œæ¥å…¥æˆ‘ä»¬çš„å¾®ä¿¡ã€‚</p>
<h4 id="è¿æ¥å¾®ä¿¡"><a href="#è¿æ¥å¾®ä¿¡" class="headerlink" title="è¿æ¥å¾®ä¿¡"></a>è¿æ¥<strong>å¾®ä¿¡</strong></h4><blockquote>
<p>æ¥å…¥è¿™ä¸ªå¾®ä¿¡çš„åŸç†ï¼Œå…¶å®æ˜¯ä½¿ç”¨efbå»ç™»å½•äº†æˆ‘ä»¬çš„ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œç„¶åæ‰€æœ‰çš„ä¿¡æ¯éƒ½ä¼šå‘åˆ°efbä¸­ï¼Œç”±efbå¤„ç†ä¹‹åæ‰ä¼šè®©ä½ åœ¨Telegramå®¢æˆ·ç«¯çœ‹åˆ°å†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨Telegramå»å›å¤å¾®ä¿¡ï¼Œåˆ›å»ºåˆ†ç»„å„ç§ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦æŸ¥çœ‹dockeré•œåƒçš„æ—¥å¿—ï¼Œè·å–åˆ°ç™»å½•ç½‘é¡µå¾®ä¿¡çš„äºŒç»´ç æˆ–è€…ç½‘å€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~/Dropbox/docker_application/efb_v2<span class="comment"># docker-compose logs</span></span><br></pre></td></tr></table></figure>

<p>æ‰‹æœºæ‰“å¼€å¾®ä¿¡ï¼Œç­‰æ—¥å¿—åŠ è½½å®Œåï¼Œæ‰«ææœ€åä¸€ä¸ªäºŒç»´ç ï¼Œç‚¹å‡»ç™»å½•å³å¯ã€‚è¿™æ ·ä½ å°±å¯ä»¥åœ¨ <strong>@testefb111_bot</strong> è¿™ä¸ª <strong>chat</strong> ä¸­æ”¶åˆ°å¾®ä¿¡çš„èŠå¤©æ¶ˆæ¯ï¼Œ<strong>reply</strong> å³å¯å›å¤æ¶ˆæ¯ã€‚</p>
<h2 id="å®‰è£…é…ç½®ssmgr"><a href="#å®‰è£…é…ç½®ssmgr" class="headerlink" title="å®‰è£…é…ç½®ssmgr"></a>å®‰è£…é…ç½®ssmgr</h2><p>æœ‰äº†vps æ²¡æœ‰sså°±å¤ªå¯æ€œäº†ï¼Œç»è¿‡å¢å¤§ä½¬çš„å®‰åˆ©ï¼Œæˆ‘é€‰æ‹© <a href="https://shadowsocks.github.io/shadowsocks-manager/#/home" target="_blank" rel="noopener">ssmgr</a> æ¥ä½œä¸ºssç®¡ç†åå°ï¼Œè¿™é‡Œé€‰æ‹©æ™®é€šå®‰è£…æ–¹å¼ã€‚</p>
<ul>
<li>å®‰è£… shadowsocks</li>
<li>å®‰è£… node.js 10.x</li>
<li>å®‰è£… Redis å¹¶è®¾ç½®å¯†ç </li>
<li>å®‰è£… ssmgr</li>
</ul>
<h4 id="å®‰è£…-shadowsocks"><a href="#å®‰è£…-shadowsocks" class="headerlink" title="å®‰è£… shadowsocks"></a>å®‰è£… shadowsocks</h4><blockquote>
<p>å¯ä»¥é‡‡ç”¨<code>libev</code>æˆ–<code>python</code>ç‰ˆæœ¬</p>
</blockquote>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©pythonç‰ˆæœ¬å§ï¼Œæ¯•ç«Ÿç³»ç»Ÿé»˜è®¤å°±å¸¦äº†ä¸ªpython3ã€‚</p>
<ul>
<li>å®‰è£… pip</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># apt install python3-pip</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading state information... Done</span><br><span class="line"><span class="comment"># ......</span></span><br><span class="line">After this operation, 201 MB of additional disk space will be used.</span><br><span class="line">Do you want to <span class="built_in">continue</span>? [Y/n] Y <span class="comment"># è¾“å…¥ Y</span></span><br><span class="line"><span class="comment"># ......</span></span><br><span class="line">Setting up python3-pip (8.1.1-2ubuntu0.4) ...</span><br><span class="line">Setting up python3-setuptools (20.7.0-1) ...</span><br><span class="line">Setting up python3-wheel (0.29.0-1) ...</span><br><span class="line">Processing triggers <span class="keyword">for</span> libc-bin (2.23-0ubuntu11) ...</span><br><span class="line">root@hot-cluster-1:~<span class="comment"># pip3 -V</span></span><br><span class="line">pip 8.1.1 from /usr/lib/python3/dist-packages (python 3.5)</span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å®‰è£…å¥½äº†ï¼ä¸‹é¢å®‰è£… shadowsocks</p>
<ul>
<li>å®‰è£… shadowsocks</li>
</ul>
<blockquote>
<p>å› Shadowsocksä½œè€…ä¸å†ç»´æŠ¤<code>pip</code>ä¸­çš„Shadowsocksï¼ˆå®šæ ¼åœ¨äº†2.8.2ï¼‰, æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…æœ€æ–°ç‰ˆçš„Shadowsocks</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># pip3 install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/usr/bin/pip3"</span>, line 11, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    sys.exit(main())</span><br><span class="line">  File <span class="string">"/usr/lib/python3/dist-packages/pip/__init__.py"</span>, line 215, <span class="keyword">in</span> main</span><br><span class="line">    locale.setlocale(locale.LC_ALL, <span class="string">''</span>)</span><br><span class="line">  File <span class="string">"/usr/lib/python3.5/locale.py"</span>, line 594, <span class="keyword">in</span> setlocale</span><br><span class="line">    <span class="built_in">return</span> _setlocale(category, locale)</span><br><span class="line">locale.Error: unsupported locale setting</span><br></pre></td></tr></table></figure>

<p>æ¥äº†ä¸ªå°æƒŠå–œï¼Œè§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># export LC_ALL=C</span></span><br></pre></td></tr></table></figure>

<p>å†æ¬¡å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># pip3 install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span></span><br><span class="line">Collecting https://github.com/shadowsocks/shadowsocks/archive/master.zip</span><br><span class="line">  Downloading https://github.com/shadowsocks/shadowsocks/archive/master.zip (115kB)</span><br><span class="line">    100% |<span class="comment">################################| 122kB 342kB/s</span></span><br><span class="line">Installing collected packages: shadowsocks</span><br><span class="line">  Running setup.py install <span class="keyword">for</span> shadowsocks ... <span class="keyword">done</span></span><br><span class="line">Successfully installed shadowsocks-3.0.0</span><br><span class="line">You are using pip version 8.1.1, however version 19.2.2 is available.</span><br><span class="line">You should consider upgrading via the <span class="string">'pip install --upgrade pip'</span> <span class="built_in">command</span>.</span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ° <strong>Successfully installed shadowsocks-XXX</strong> å°±æ˜¯å®‰è£…æˆåŠŸäº†ã€‚</p>
<ul>
<li>åˆ›å»ºé…ç½®æ–‡ä»¶</li>
</ul>
<p>åœ¨ /etc ç›®å½•ä¸‹åˆ›å»º shadowsocks é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># mkdir /etc/shadowsocks</span></span><br><span class="line">root@hot-cluster-1:~<span class="comment"># cd /etc/shadowsocks</span></span><br><span class="line">root@hot-cluster-1:~<span class="comment"># touch config.json</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ vim ç¼–è¾‘ <strong>config.json</strong> ç²˜è´´ä¸€ä¸‹å†…å®¹ï¼Œæ³¨æ„ä¿®æ”¹ password</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"::"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"mypassword"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæˆä¹‹åæµ‹è¯•ä¸€ä¸‹çœ‹çœ‹èƒ½ä¸èƒ½ç”¨ã€‚</p>
<ul>
<li>æµ‹è¯• shadowsocks é…ç½®</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># ssserver -c /etc/shadowsocks/config.json</span></span><br><span class="line">INFO: loading config from /etc/shadowsocks/config.json</span><br><span class="line">2019-08-21 03:15:24 INFO     loading libcrypto from libcrypto.so.1.0.0</span><br><span class="line">2019-08-21 03:15:24 INFO     starting server at :::8388</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½® Systemd æ¥ç®¡ç† shadowsocks</li>
</ul>
<p>æµ‹è¯•é€šè¿‡åï¼Œæˆ‘ä»¬å°†shadowsocks åšä¸ºä¸€ä¸ªæœåŠ¡æ¥å¯åŠ¨ï¼Œè¿™æ ·çš„è¯æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<ol>
<li>åˆ›å»º service æ–‡ä»¶</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># vim /etc/systemd/system/shadowsocks-server.service</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¼–å†™æœåŠ¡å†…å®¹: shadowsocks-server.service</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks Server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/local/bin/ssserver -c /etc/shadowsocks/config.json</span><br><span class="line">Restart=on-abort</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å¯åŠ¨æœåŠ¡</li>
</ol>
<p>å¯åŠ¨Shadowsocks:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># systemctl start shadowsocks-server.service</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># systemctl enable shadowsocks-server.service</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/shadowsocks-server.service to /etc/systemd/system/shadowsocks-server.service.</span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>åˆ°æ­¤ shadowsocks å®‰è£…é…ç½®å®Œæ¯•ï¼Œå¦‚æœæœ‰è¿›é˜¶ä¼˜åŒ–çš„éœ€æ±‚çš„è¯ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„è¿™ä¸ªæ–‡ç« ï¼š</p>
<p><a href="https://www.polarxiong.com/archives/Ubuntu-16-04%E4%B8%8BShadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8C%96.html" target="_blank" rel="noopener">https://www.polarxiong.com/archives/Ubuntu-16-04%E4%B8%8BShadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8C%96.html</a></p>
<h4 id="å®‰è£…-node-js-10-x"><a href="#å®‰è£…-node-js-10-x" class="headerlink" title="å®‰è£… node.js 10.x"></a>å®‰è£… node.js 10.x</h4><blockquote>
<p>å»ºè®®ä½¿ç”¨<a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener"><code>nodesource</code></a>é‡Œè¾¹çš„æ–¹å¼å®‰è£…</p>
</blockquote>
<p>Ssmgr å®˜æ–¹æ¨èæˆ‘ä»¬ç”¨ <a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener">nodesource</a> æ–¹å¼æ¥å®‰è£…ï¼Œç‚¹å¼€çœ‹ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Installing the NodeSource Node.js 10.x repo...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Populating apt-get cache...</span></span><br><span class="line"></span><br><span class="line">+ apt-get update</span><br><span class="line">Hit:1 http://us.archive.ubuntu.com/ubuntu xenial InRelease</span><br><span class="line">Get:2 http://us.archive.ubuntu.com/ubuntu xenial-updates InRelease [109 kB]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ......</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Run `sudo apt-get install -y nodejs` to install Node.js 10.x and npm</span></span><br><span class="line"><span class="comment">## You may also need development tools to build native addons:</span></span><br><span class="line">     sudo apt-get install gcc g++ make</span><br><span class="line"><span class="comment">## To install the Yarn package manager, run:</span></span><br><span class="line">     curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -</span><br><span class="line">     <span class="built_in">echo</span> <span class="string">"deb https://dl.yarnpkg.com/debian/ stable main"</span> | sudo tee /etc/apt/sources.list.d/yarn.list</span><br><span class="line">     sudo apt-get update &amp;&amp; sudo apt-get install yarn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç›´æ¥æ‰¾åˆ°<strong>readme</strong> ä¸­å…³äº <strong>Node.js v10.x</strong> å®‰è£…çš„éƒ¨åˆ†ï¼Œé€‰æ‹©<strong>Using Ubuntu</strong>çš„å†…å®¹</p>
<p>å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># apt install nodejs -y</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading state information... Done</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  nodejs</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.</span><br><span class="line">Need to get 15.8 MB of archives.</span><br><span class="line">After this operation, 76.5 MB of additional disk space will be used.</span><br><span class="line">Get:1 https://deb.nodesource.com/node_10.x xenial/main amd64 nodejs amd64 10.16.3-1nodesource1 [15.8 MB]</span><br><span class="line">Fetched 15.8 MB <span class="keyword">in</span> 3s (4951 kB/s)</span><br><span class="line">Selecting previously unselected package nodejs.</span><br><span class="line">(Reading database ... 99725 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../nodejs_10.16.3-1nodesource1_amd64.deb ...</span><br><span class="line">Unpacking nodejs (10.16.3-1nodesource1) ...</span><br><span class="line">Processing triggers <span class="keyword">for</span> man-db (2.7.5-1) ...</span><br><span class="line">Setting up nodejs (10.16.3-1nodesource1) ...</span><br></pre></td></tr></table></figure>

<p>éªŒè¯ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># node -v</span></span><br><span class="line">v10.16.3</span><br><span class="line">root@hot-cluster-1:~<span class="comment"># npm -v</span></span><br><span class="line">6.9.0</span><br><span class="line">root@hot-cluster-1:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>ä¸‹ä¸€æ­¥èµ°ç€ã€‚</p>
<h4 id="å®‰è£…-Redis-å¹¶è®¾ç½®å¯†ç "><a href="#å®‰è£…-Redis-å¹¶è®¾ç½®å¯†ç " class="headerlink" title="å®‰è£… Redis å¹¶è®¾ç½®å¯†ç "></a>å®‰è£… Redis å¹¶è®¾ç½®å¯†ç </h4><p>å®‰è£…Redisï¼Œssmgr çš„æ–‡æ¡£åŒæ ·æ²¡æœ‰ç»™è¯¦ç»†çš„æ–‡æ¡£ã€‚æˆ‘ä»¬å¯ä»¥ç‚¹å‡»<a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-redis-on-ubuntu-16-04" target="_blank" rel="noopener">è¿™é‡Œ</a>æŸ¥çœ‹, æˆ–è€…æˆ‘ä»¬ç›´æ¥ <a href="https://tecadmin.net/install-redis-ubuntu/" target="_blank" rel="noopener">apt å®‰è£…</a> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># apt update</span></span><br><span class="line">root@hot-cluster-1:~<span class="comment"># apt install redis-server</span></span><br><span class="line">root@hot-cluster-1:~<span class="comment"># systemctl enable redis-server.service</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ï¼Œæˆ‘ä»¬å®‰è£…äº†redis-server å¹¶ä¸”ï¼Œå°†ä»–è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨çš„æœåŠ¡äº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥é…ç½®redis</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># vim /etc/redis/redis.conf</span></span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…-ssmgr"><a href="#å®‰è£…-ssmgr" class="headerlink" title="å®‰è£… ssmgr"></a>å®‰è£… ssmgr</h4><p>ä¸Šé¢çš„å‡†å¤‡å·¥ä½œéƒ½åšå®Œäº†ï¼Œæˆ‘ä»¬ä»…ä»…éœ€è¦å®‰è£… ssmgr å°±è¡Œäº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@hot-cluster-1:~<span class="comment"># npm i -g shadowsocks-manager --unsafe-perm</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–¹é¢ï¼Œå®˜æ–¹å†™çš„æ¯”è¾ƒå®Œæ•´ï¼š</p>
<blockquote>
<p><a href="https://shadowsocks.github.io/shadowsocks-manager/#/config?id=%E9%85%8D%E7%BD%AE%E9%A6%96%E4%B8%AA%E8%8A%82%E7%82%B9" target="_blank" rel="noopener">https://shadowsocks.github.io/shadowsocks-manager/#/config?id=%E9%85%8D%E7%BD%AE%E9%A6%96%E4%B8%AA%E8%8A%82%E7%82%B9</a></p>
</blockquote>
<p>over</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.flyriven.com/2019/08/23/how-to-use-vps/" data-id="cjzsc92790003mhe7pkko7z7l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/23/test-images-path/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          test images path
        
      </div>
    </a>
  
  
    <a href="/2019/08/23/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/26/math-summarize/">æ•°å­¦ä»åˆä¸­åˆ°å¯¿ç»ˆæ­£å¯</a>
          </li>
        
          <li>
            <a href="/2019/08/23/test-images-path/">test images path</a>
          </li>
        
          <li>
            <a href="/2019/08/23/how-to-use-vps/">ä»é›¶å¼€å§‹é…ç½®VPS</a>
          </li>
        
          <li>
            <a href="/2019/08/23/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>